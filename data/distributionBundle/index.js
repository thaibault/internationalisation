"use strict";if("undefined"!=typeof module&&null!==module&&"undefined"!==eval("typeof require")&&null!==eval("require")&&"main"in eval("require")&&"undefined"!==eval("typeof require.main")&&null!==eval("require.main")){var ORIGINAL_MAIN_MODULE=module;module!==eval("require.main")&&"paths"in module&&"paths"in eval("require.main")&&"undefined"!=typeof __dirname&&null!==__dirname&&(module.paths=eval("require.main.paths").concat(module.paths.filter((function(path){return eval("require.main.paths").includes(path)}))))}if(null==window)var window="undefined"==typeof global||null===global?{}:global;!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("clientnode"));else if("function"==typeof define&&define.amd)define(["clientnode"],t);else{var n="object"==typeof exports?t(require("clientnode")):t(e.clientnode);for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,(function(e){return function(){var t=[,function(t){t.exports=e}],n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};o.r(r),o.d(r,{Internationalisation:function(){return w}});var i=o(1);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function u(){function e(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))}function t(e){var t,n;return function(o){t||(t={stop:function(){return n(o.a,2)},catch:function(){return o.v},abrupt:function(e,t){return n(o.a,i[e],t)},delegateYield:function(e,r,i){return t.resultName=r,n(o.d,l(e),i)},finish:function(e){return n(o.f,e)}},n=function(e,n,r){o.p=t.prev,o.n=t.next;try{return e(n,r)}finally{t.next=o.n}}),t.resultName&&(t[t.resultName]=o.v,t.resultName=void 0),t.sent=o.v,t.next=o.n;try{return e.call(this,t)}finally{o.p=t.prev,o.n=t.next}}}var n=h(),o=n.m(u),r=(Object.getPrototypeOf?Object.getPrototypeOf(o):o.__proto__).constructor,i={throw:1,return:2,break:3,continue:3};return(u=function(){return{wrap:function(e,o,r,i){return n.w(t(e),o,r,i&&i.reverse())},isGeneratorFunction:e,mark:n.m,awrap:function(e,t){return new m(e,t)},AsyncIterator:f,async:function(n,o,r,i,a){return(e(o)?d:p)(t(n),o,r,i,a)},keys:c,values:l}})()}function l(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(typeof e+" is not iterable")}function c(e){var t=Object(e),n=[];for(var o in t)n.unshift(o);return function e(){for(;n.length;)if((o=n.pop())in t)return e.value=o,e.done=!1,e;return e.done=!0,e}}function p(e,t,n,o,r){var i=d(e,t,n,o,r);return i.next().then((function(e){return e.done?e.value:i.next()}))}function d(e,t,n,o,r){return new f(h().w(e,t,n,o),r||Promise)}function f(e,t){function n(o,r,i,a){try{var s=e[o](r),u=s.value;return u instanceof m?t.resolve(u.v).then((function(e){n("next",e,i,a)}),(function(e){n("throw",e,i,a)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,a)}))}catch(e){a(e)}}var o;this.next||(g(f.prototype),g(f.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),g(this,"_invoke",(function(e,r,i){function a(){return new t((function(t,o){n(e,i,t,o)}))}return o=o?o.then(a,a):a()}),!0)}function h(){function e(e,n,o,r){var s=n&&n.prototype instanceof t?n:t,u=Object.create(s.prototype);return g(u,"_invoke",function(e,t,n){function o(e,t){for(s=e,u=t,a=0;!d&&l&&!n&&a<p.length;a++){var n,o=p[a],r=f.p,h=o[2];3<e?(n=h===t)&&(u=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=i):o[0]<=r&&((n=2>e&&r<o[1])?(s=0,f.v=t,f.n=o[1]):r<h&&(n=3>e||o[0]>t||t>h)&&(o[4]=e,o[5]=t,f.n=h,s=0))}if(n||1<e)return c;throw d=!0,t}var r,s,u,l=0,p=n||[],d=!1,f={p:0,n:0,v:i,a:o,f:o.bind(i,4),d:function(e,t){return r=e,s=0,u=i,f.n=t,c}};return function(n,p,h){if(1<l)throw TypeError("Generator is already running");for(d&&1===p&&o(p,h),s=p,u=h;(a=2>s?i:u)||!d;){r||(s?3>s?(1<s&&(f.n=-1),o(s,u)):f.n=u:f.v=u);try{if(l=2,r){if(s||(n="next"),a=r[n]){if(!(a=a.call(r,u)))throw TypeError("iterator result is not an object");if(!a.done)return a;u=a.value,2>s&&(s=0)}else 1===s&&(a=r.return)&&a.call(r),2>s&&(u=TypeError("The iterator does not provide a '"+n+"' method"),s=1);r=i}else if((a=(d=0>f.n)?u:e.call(t,f))!==c)break}catch(e){r=i,s=1,u=e}finally{l=1}}return{value:a,done:d}}}(e,o,r),!0),u}function t(){}function n(){}function o(){}function r(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,g(e,l,"GeneratorFunction")),e.prototype=Object.create(d),e}/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var i,a,s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",l=s.toStringTag||"@@toStringTag",c={};a=Object.getPrototypeOf;var p=[][u]?a(a([][u]())):(g(a={},u,(function(){return this})),a),d=o.prototype=t.prototype=Object.create(p);return n.prototype=o,g(d,"constructor",o),g(o,"constructor",n),n.displayName="GeneratorFunction",g(o,l,"GeneratorFunction"),g(d),g(d,l,"Generator"),g(d,u,(function(){return this})),g(d,"toString",(function(){return"[object Generator]"})),(h=function(){return{w:e,m:r}})()}function g(e,t,n,o){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}g=function(e,t,n,o){if(t)r?r(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n;else{var i=function(t,n){g(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},g(e,t,n,o)}function m(e,t){this.v=e,this.k=t}function v(e,t,n,o,r,i,a){try{var s=e[i](a),u=s.value}catch(a){return void n(a)}s.done?t(u):Promise.resolve(u).then(o,r)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){function i(e){v(s,o,r,i,a,"next",e)}function a(e){v(s,o,r,i,a,"throw",e)}var s=e.apply(t,n);i(void 0)}))}}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}var w=function(e){function t(){for(var t,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).$domNodes=null,t.currentLanguage="enUS",t.knownTranslations={},t.lock=new i.Lock,t.options=null,t._$domNodeToFade=null,t._replacements=[],t._textNodesWithKnownTranslation={},t}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,y(e,t)}(t,e);var n=t.prototype;return n.initialize=function(n){var o=this;void 0===n&&(n={}),e.prototype.initialize.call(this,(0,i.extend)(!0,{},t._defaultOptions,n)),this.options.preReplacementLanguagePattern=(0,i.format)(this.options.preReplacementLanguagePattern,this.options.replacementLanguagePattern.substring(1,this.options.replacementLanguagePattern.length-1)),this.options.lockDescription=(0,i.format)(this.options.lockDescription,this.options.name),this.options.sessionDescription=(0,i.format)(this.options.sessionDescription,this.options.name),this.$domNodes=this.grabDomNodes(this.options.domNodes,this.$domNode),this.$domNodes.switchLanguageButtons=(0,i.$)('a[href^="#'+this.options.languageHashPrefix+'"]'),this._movePreReplacementNodes(),this.currentLanguage=this._normalizeLanguage(this.options.default);var r=this._determineUsefulLanguage();return this.on(this.$domNodes.switchLanguageButtons,"click",(function(e){e.preventDefault();var t=(0,i.$)(e.target).attr("href");t&&o.switch(t.substring(o.options.languageHashPrefix.length+1))})),this.currentLanguage===r?(this._switchCurrentLanguageIndicator(r),Promise.resolve(this.$domNode)):this.switch(r,!0)},n.switch=function(){var e=x(u().mark((function e(t,n){var o,r,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),!0===t||!this.options.selection.length||this.options.selection.includes(t)){e.next=4;break}return this.debug('"{1}" isn\'t one of the allowed languages.',t),e.abrupt("return",this.$domNode);case 4:return e.next=6,this.lock.acquire(this.options.lockDescription);case 6:if(!0===t?(n=!0,t=this.currentLanguage):t=this._normalizeLanguage(t),!(n&&t!==this.options.default||this.currentLanguage!==t)){e.next=21;break}return o="Switch to",n&&(o="Ensure"),this.debug('{1} "{2}".',o,t),this._switchCurrentLanguageIndicator(t),e.next=14,this.fireEvent(n?"ensure":"switch",!0,this,this.currentLanguage,t);case 14:return this._$domNodeToFade=null,this._replacements=[],r=this._collectTextNodesToReplace(t,n),i=r[0],a=r[1],this._ensureLastTextNodeHavingLanguageIndicator(i,a,n),e.next=20,this._handleSwitchEffect(t,n);case 20:return e.abrupt("return",this.$domNode);case 21:return this.debug('"{1}" is already current selected language.',t),this.lock.release(this.options.lockDescription),e.abrupt("return",this.$domNode);case 24:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.refresh=function(){return this._movePreReplacementNodes(),this.switch(!0)},n._handleSwitchEffect=function(){var e=x(u().mark((function e(t,n){var o,r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.currentLanguage,n||!this.options.fadeEffect||!this._$domNodeToFade){e.next=11;break}return e.next=4,(r=this._$domNodeToFade).animate.apply(r,this.options.textNodeParent.hideAnimation).promise();case 4:return this._switchLanguage(t),e.next=7,(i=this._$domNodeToFade).animate.apply(i,this.options.textNodeParent.showAnimation).promise();case 7:return e.next=9,this.fireEvent("switched",!0,this,o,t);case 9:return this.lock.release(this.options.lockDescription),e.abrupt("return");case 11:return this._switchLanguage(t),e.next=14,this.fireEvent(n?"ensured":"switched",!0,this,o,t);case 14:this.lock.release(this.options.lockDescription);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n._movePreReplacementNodes=function(){var e=this;this.$domNode.find(":not(iframe)").contents().each((function(){var t=(0,i.$)(this),n=t.prop("nodeName").toLowerCase();if(e.options.replacementDomNodeName.includes(n)){["#comment","#text"].includes(n)||t.hide();var o=new RegExp(e.options.preReplacementLanguagePattern),r=t.prop("textContent").match(o);if(r&&r[0]){t.prop("textContent",t.prop("textContent").replace(o,r[1]));var a=!1;t.parent().contents().each((function(){return a&&(0,i.$)(this).Tools("text").trim()?(t.appendTo(this),!1):void(t[0]===this&&(a=!0))}))}}}))},n._collectTextNodesToReplace=function(e,t){var n=null,o=null,r=null,a=null;this.knownTranslations={};var s=this;return this.$domNode.find(":not(iframe)").contents().each((function(){var u=(0,i.$)(this),l=u.prop("nodeName").toLowerCase();if(s.options.replaceDomNodeNames.includes(l.toLowerCase()))u.Tools("text").trim()&&0===u.parents(s.options.replaceDomNodeNames.join()).length&&(a=s._ensureLastTextNodeHavingLanguageIndicator(r,a,t),n=u);else if(n){if(s.options.replacementDomNodeName.includes(l)){var c=u.prop("textContent");"#comment"!==l&&(c=u.html());var p=c.match(new RegExp(s.options.replacementLanguagePattern));return void(Array.isArray(p)&&p[1]===e?(s.knownTranslations[n.Tools("text").trim()]=p[2].trim(),s._registerTextNodeToChange(n,u,p,o),r=n,a=o,n=null,o=null):u.prop("textContent").match(new RegExp(s.options.currentLanguagePattern))&&(o=u))}r=null,a=null,n=null,o=null}})),this._registerKnownTextNodes(),[r,a]},n._registerKnownTextNodes=function(){this._textNodesWithKnownTranslation={};var e=this;this.$domNodes.knownTranslation.find(":not(iframe)").contents().each((function(){var t=(0,i.$)(this);!e.options.replaceDomNodeNames.includes(t.prop("nodeName").toLowerCase())&&t.Tools("text").trim()&&0===t.parents(e.options.replaceDomNodeNames.join()).length&&Object.prototype.hasOwnProperty.call(e.knownTranslations,t.Tools("text").trim())&&(e._addTextNodeToFade(t),e._textNodesWithKnownTranslation[e.knownTranslations[t.prop("textContent").trim()]]=Object.prototype.hasOwnProperty.call(e._textNodesWithKnownTranslation,e.knownTranslations[t.prop("textContent").trim()])?e._textNodesWithKnownTranslation[e.knownTranslations[t.prop("textContent").trim()]].add(this):t)}))},n._normalizeLanguage=function(e){for(var t=0,n=Object.entries(this.options.languageMapping);t<n.length;t++){var o=n[t],r=o[0],i=o[1];if(i.includes(r.toLowerCase())||i.push(r.toLowerCase()),i.includes(e.toLowerCase()))return r}return this.options.default},n._determineUsefulLanguage=function(){var e,t,n,o;return this.options.initial?o=this.options.initial:Object.prototype.hasOwnProperty.call(i.$.global,"window")&&(null!=(e=i.$.global.window)&&e.localStorage.getItem(this.options.sessionDescription)?(o=i.$.global.window.localStorage.getItem(this.options.sessionDescription),this.debug('Determine "'+o+'", because of local storage information.')):null!=(t=i.$.global.window)&&t.navigator.language&&(o=i.$.global.window.navigator.language,this.debug('Determine "'+o+'", because of browser settings.'))),o||(o=this.options.default,this.debug('Determine "'+o+'", because of default option.')),o=this._normalizeLanguage(o),this.options.selection.length&&!this.options.selection.includes(o)&&(this.debug('"'+o+'" isn\'t one of the allowed languages. Set language to "'+this.options.selection[0]+'".'),o=this.options.selection[0]),null!=(n=i.$.global.window)&&n.localStorage&&i.$.global.window.localStorage.setItem(this.options.sessionDescription,o),o},n._addTextNodeToFade=function(e){var t=e.parent();this._$domNodeToFade=this._$domNodeToFade?this._$domNodeToFade.add(t):t},n._registerTextNodeToChange=function(e,t,n,o){this._addTextNodeToFade(e),t&&this._replacements.push({$textNodeToTranslate:e,$nodeToReplace:t,textToReplace:n[2],$currentLanguageDomNode:o})},n._ensureLastTextNodeHavingLanguageIndicator=function(e,t,n){if(e&&!t){var o=this.currentLanguage;n&&(o=this.options.default),t=(0,i.$)("\x3c!--"+o+"--\x3e"),e.after(t)}return t},n._switchLanguage=function(e){for(var t,n=this,o=function(){var o=t.value,r=o.$textNodeToTranslate.html();"#text"===o.$textNodeToTranslate.prop("nodeName")&&(r=o.$textNodeToTranslate.prop("textContent"));var a=r.trim();if(!n.options.templateDelimiter||!a.endsWith(n.options.templateDelimiter.post)&&n.options.templateDelimiter.post){var s=o.$currentLanguageDomNode;if(!s){s=(0,i.$)("body");var u=!1;o.$textNodeToTranslate.parent().contents().each((function(){return u?(o.$currentLanguageDomNode=s=(0,i.$)(this),!1):void(this===o.$textNodeToTranslate[0]&&(u=!0))}))}var l=s.prop("textContent");e===l&&n.warn('Text node "'+o.textToReplace+'" is marked as "'+l+'" and has same translation language as it already is.');var c=o.$nodeToReplace.prop("nodeName").toLowerCase();"#comment"===c?o.$textNodeToTranslate.after((0,i.$)("\x3c!--"+l+":"+r+"--\x3e")):o.$textNodeToTranslate.after((0,i.$)("<"+c+">"+l+":"+r+"</"+c+">").hide()),o.$textNodeToTranslate.after((0,i.$)("\x3c!--"+e+"--\x3e")),"#text"===o.$textNodeToTranslate.prop("nodeName")?o.$textNodeToTranslate.prop("textContent",o.textToReplace):o.$textNodeToTranslate.html(o.textToReplace),s.remove(),o.$nodeToReplace.remove()}},r=a(this._replacements);!(t=r()).done;)o();for(var s=0,u=Object.entries(this._textNodesWithKnownTranslation);s<u.length;s++){var l=u[s],c=l[0];l[1].prop("textContent",c)}i.$.global.localStorage&&i.$.global.localStorage.setItem(this.options.sessionDescription,e),this.currentLanguage=e},n._switchCurrentLanguageIndicator=function(e){(0,i.$)('a[href="#'+this.options.languageHashPrefix+this.currentLanguage+'"].'+this.options.currentLanguageIndicatorClassName).removeClass(this.options.currentLanguageIndicatorClassName),(0,i.$)('a[href="#'+this.options.languageHashPrefix+e+'"]').addClass(this.options.currentLanguageIndicatorClassName)},t}(i.BoundTools);return w._defaultOptions={currentLanguageIndicatorClassName:"current",currentLanguagePattern:"^[a-z]{2}[A-Z]{2}$",default:"enUS",domNodes:{knownTranslation:"div.toc"},fadeEffect:!0,initial:null,languageHashPrefix:"lang-",languageMapping:{deDE:["de","de_de","de-de","german","deutsch"],enUS:["en","en_us","en-us"],enEN:["en_en","en-en","english"],frFR:["fr","fr_fr","fr-fr","french"]},lockDescription:"{1}Switch",name:"Internationalisation",onSwitched:i.NOOP,onEnsured:i.NOOP,onSwitch:i.NOOP,onEnsure:i.NOOP,preReplacementLanguagePattern:"^\\|({1})$",replaceDomNodeNames:["#text","lang-replace"],replacementDomNodeName:["#comment","lang-replacement"],replacementLanguagePattern:"^([a-z]{2}[A-Z]{2}):((.|\\s)*)$",selection:[],sessionDescription:"{1}",templateDelimiter:{pre:"{{",post:"}}"},textNodeParent:{hideAnimation:[{opacity:0},{duration:"fast"}],showAnimation:[{opacity:1},{duration:"fast"}]}},r.default=w,Object.prototype.hasOwnProperty.call(i.$,"fn")&&(i.$.fn.Internationalisation=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.Tools.controller(w,t,this)}),r}()}));