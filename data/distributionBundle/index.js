'use strict';if(typeof module!=='undefined'&&module!==null&&eval('typeof require')!=='undefined'&&eval('require')!==null&&'main'in eval('require')&&eval('typeof require.main')!=='undefined'&&eval('require.main')!==null){var ORIGINAL_MAIN_MODULE=module;if(module!==eval('require.main')&&'paths'in module&&'paths'in eval('require.main')&&typeof __dirname!=='undefined'&&__dirname!==null)module.paths=eval('require.main.paths').concat(module.paths.filter(function(path){return eval('require.main.paths').includes(path)}))};if(typeof window==='undefined'||window===null)var window=(typeof global==='undefined'||global===null)?{}:global;!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("clientnode"));else if("function"==typeof define&&define.amd)define(["clientnode"],e);else{var n="object"==typeof exports?e(require("clientnode")):e(t.clientnode);for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(this,(function(t){return function(){"use strict";var e=[,function(e){e.exports=t}],n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,{a:e}),e},o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return function(){o.r(r),o.d(r,{Internationalisation:function(){return l}});var t=o(1),e=o.n(t);function n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */function t(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}function e(t,e,r,i){var a=e&&e.prototype instanceof o?e:o,s=Object.create(a.prototype),c=new p(i||[]);return s._invoke=function(t,e,o){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var c=u(s,o);if(c){if(c===T)continue;return c}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===r)throw r="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r="executing";var l=n(t,e,o);if("normal"===l.type){if(r=o.done?"completed":"suspendedYield",l.arg===T)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(r="completed",o.method="throw",o.arg=l.arg)}}}(t,r,c),s}function n(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function o(){}function r(){}function i(){}function s(e){["next","throw","return"].forEach((function(n){t(e,n,(function(t){return this._invoke(n,t)}))}))}function c(t,e){function o(r,i,a,s){var c=n(t[r],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&v.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var r;this._invoke=function(t,n){function i(){return new e((function(e,r){o(t,n,e,r)}))}return r=r?r.then(i,i):i()}}function u(t,e){var o=t.iterator[e.method];if(void 0===o){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,u(t,e),"throw"===e.method))return T;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var r=n(o,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,T;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,T):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,T)}function l(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}function d(t){if(t){var e=t[w];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(v.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:f}}function f(){return{value:void 0,done:!0}}a=function(){return g};var g={},m=Object.prototype,v=m.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},w=y.iterator||"@@iterator",x=y.asyncIterator||"@@asyncIterator",N=y.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(t,e,n){return t[e]=n}}g.wrap=e;var T={},b={};t(b,w,(function(){return this}));var L=Object.getPrototypeOf,_=L&&L(L(d([])));_&&_!==m&&v.call(_,w)&&(b=_);var $=i.prototype=o.prototype=Object.create(b);return r.prototype=i,t($,"constructor",i),t(i,"constructor",r),r.displayName=t(i,N,"GeneratorFunction"),g.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===r||"GeneratorFunction"===(e.displayName||e.name))},g.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,t(e,N,"GeneratorFunction")),e.prototype=Object.create($),e},g.awrap=function(t){return{__await:t}},s(c.prototype),t(c.prototype,x,(function(){return this})),g.AsyncIterator=c,g.async=function(t,n,o,r,i){void 0===i&&(i=Promise);var a=new c(e(t,n,o,r),i);return g.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},s($),t($,N,"Generator"),t($,w,(function(){return this})),t($,"toString",(function(){return"[object Generator]"})),g.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},g.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&v.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,o){return i.type="throw",i.arg=t,n.next=e,o&&(n.method="next",n.arg=void 0),!!o}if(this.done)throw t;for(var n=this,o=this.tryEntries.length-1;0<=o;--o){var r=this.tryEntries[o],i=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var a=v.call(r,"catchLoc"),s=v.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n,o=this.tryEntries.length-1;0<=o;--o)if((n=this.tryEntries[o]).tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=t,i.arg=e,r?(this.method="next",this.next=r.finallyLoc,T):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),T},finish:function(t){for(var e,n=this.tryEntries.length-1;0<=n;--n)if((e=this.tryEntries[n]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),h(e),T},catch:function(t){for(var e,n=this.tryEntries.length-1;0<=n;--n)if((e=this.tryEntries[n]).tryLoc===t){var o=e.completion;if("throw"===o.type){var r=o.arg;h(e)}return r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),T}},g}function s(t,e,n,o,r,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(o,r)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){function i(t){s(c,o,r,i,a,"next",t)}function a(t){s(c,o,r,i,a,"throw",t)}var c=t.apply(e,n);i(void 0)}))}}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}var l=function(o){function r(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=o.call.apply(o,[this].concat(r))||this).$domNodes=null,e.currentLanguage="enUS",e.knownTranslations={},e.lock=new t.Lock,e.options=null,e._$domNodeToFade=null,e._replacements=[],e._textNodesWithKnownTranslation={},e}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,u(t,e)}(r,o);var i=r.prototype;return i.initialize=function(n){var i=this;void 0===n&&(n={}),o.prototype.initialize.call(this,e().extend(!0,{},r._defaultOptions,n)),this.options.preReplacementLanguagePattern=e().stringFormat(this.options.preReplacementLanguagePattern,this.options.replacementLanguagePattern.substr(1,this.options.replacementLanguagePattern.length-2)),this.options.lockDescription=e().stringFormat(this.options.lockDescription,this.options.name),this.options.sessionDescription=e().stringFormat(this.options.sessionDescription,this.options.name),this.$domNodes=this.grabDomNodes(this.options.domNodes,this.$domNode),this.$domNodes.switchLanguageButtons=(0,t.$)('a[href^="#'+this.options.languageHashPrefix+'"]'),this._movePreReplacementNodes(),this.currentLanguage=this._normalizeLanguage(this.options.default);var a=this._determineUsefulLanguage();return this.on(this.$domNodes.switchLanguageButtons,"click",(function(e){return e.preventDefault(),i.switch((0,t.$)(e.target).attr("href").substr(i.options.languageHashPrefix.length+1))})),this.currentLanguage===a?(this._switchCurrentLanguageIndicator(a),Promise.resolve(this.$domNode)):this.switch(a,!0)},i.switch=function(){var t=c(a().mark((function t(e,n){var o,r,i,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n=!1),!0===e||!this.options.selection.length||this.options.selection.includes(e)){t.next=4;break}return this.debug('"{1}" isn\'t one of the allowed languages.',e),t.abrupt("return",this.$domNode);case 4:return t.next=6,this.lock.acquire(this.options.lockDescription);case 6:if(!0===e?(n=!0,e=this.currentLanguage):e=this._normalizeLanguage(e),!(n&&e!==this.options.default||this.currentLanguage!==e)){t.next=21;break}return o="Switch to",n&&(o="Ensure"),this.debug('{1} "{2}".',o,e),this._switchCurrentLanguageIndicator(e),t.next=14,this.fireEvent(n?"ensure":"switch",!0,this,this.currentLanguage,e);case 14:return this._$domNodeToFade=null,this._replacements=[],r=this._collectTextNodesToReplace(e,n),i=r[0],s=r[1],this._ensureLastTextNodeHavingLanguageIndicator(i,s,n),t.next=20,this._handleSwitchEffect(e,n);case 20:return t.abrupt("return",this.$domNode);case 21:return this.debug('"{1}" is already current selected language.',e),this.lock.release(this.options.lockDescription),t.abrupt("return",this.$domNode);case 24:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.refresh=function(){return this._movePreReplacementNodes(),this.switch(!0)},i._handleSwitchEffect=function(){var t=c(a().mark((function t(e,n){var o,r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.currentLanguage,n||!this.options.fadeEffect||!this._$domNodeToFade){t.next=12;break}return t.next=4,(r=this._$domNodeToFade).animate.apply(r,this.options.textNodeParent.hideAnimation).promise();case 4:if(this._switchLanguage(e),!this._$domNodeToFade){t.next=11;break}return t.next=8,(i=this._$domNodeToFade).animate.apply(i,this.options.textNodeParent.showAnimation).promise();case 8:return t.next=10,this.fireEvent(n?"ensured":"switched",!0,this,o,e);case 10:this.lock.release(this.options.lockDescription);case 11:return t.abrupt("return");case 12:return this._switchLanguage(e),t.next=15,this.fireEvent(n?"ensured":"switched",!0,this,o,e);case 15:this.lock.release(this.options.lockDescription);case 16:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),i._movePreReplacementNodes=function(){var e=this;this.$domNode.find(":not(iframe)").contents().each((function(){var n=(0,t.$)(this),o=n.prop("nodeName").toLowerCase();if(e.options.replacementDomNodeName.includes(o)){["#comment","#text"].includes(o)||n.hide();var r=new RegExp(e.options.preReplacementLanguagePattern),i=n.prop("textContent").match(r);if(i&&i[0]){n.prop("textContent",n.prop("textContent").replace(r,i[1]));var a=!1;n.parent().contents().each((function(){return a&&(0,t.$)(this).Tools("text").trim()?(n.appendTo(this),!1):void(n[0]===this&&(a=!0))}))}}}))},i._collectTextNodesToReplace=function(e,n){var o=null,r=null,i=null,a=null;this.knownTranslations={};var s=this;return this.$domNode.find(":not(iframe)").contents().each((function(){var c=(0,t.$)(this),u=c.prop("nodeName").toLowerCase();if(s.options.replaceDomNodeNames.includes(u.toLowerCase()))c.Tools("text").trim()&&0===c.parents(s.options.replaceDomNodeNames.join()).length&&(a=s._ensureLastTextNodeHavingLanguageIndicator(i,a,n),o=c);else if(o){if(s.options.replacementDomNodeName.includes(u)){var l=c.prop("textContent");"#comment"!==u&&(l=c.html());var h=l.match(new RegExp(s.options.replacementLanguagePattern));return void(Array.isArray(h)&&h[1]===e?(s.knownTranslations[o.Tools("text").trim()]=h[2].trim(),s._registerTextNodeToChange(o,c,h,r),i=o,a=r,o=null,r=null):c.prop("textContent").match(new RegExp(s.options.currentLanguagePattern))&&(r=c))}i=null,a=null,o=null,r=null}})),this._registerKnownTextNodes(),[i,a]},i._registerKnownTextNodes=function(){this._textNodesWithKnownTranslation={};var e=this;this.$domNodes.knownTranslation.find(":not(iframe)").contents().each((function(){var n=(0,t.$)(this);!e.options.replaceDomNodeNames.includes(n.prop("nodeName").toLowerCase())&&n.Tools("text").trim()&&0===n.parents(e.options.replaceDomNodeNames.join()).length&&Object.prototype.hasOwnProperty.call(e.knownTranslations,n.Tools("text").trim())&&(e._addTextNodeToFade(n),e._textNodesWithKnownTranslation[e.knownTranslations[n.prop("textContent").trim()]]=Object.prototype.hasOwnProperty.call(e._textNodesWithKnownTranslation,e.knownTranslations[n.prop("textContent").trim()])?e._textNodesWithKnownTranslation[e.knownTranslations[n.prop("textContent").trim()]].add(this):n)}))},i._normalizeLanguage=function(t){for(var e=0,n=Object.entries(this.options.languageMapping);e<n.length;e++){var o=n[e],r=o[0],i=o[1];if(i.includes(r.toLowerCase())||i.push(r.toLowerCase()),i.includes(t.toLowerCase()))return r}return this.options.default},i._determineUsefulLanguage=function(){var e,n,o,r;return this.options.initial?r=this.options.initial:t.$.global.window&&(null!=(e=t.$.global.window.localStorage)&&e.getItem(this.options.sessionDescription)?(r=t.$.global.window.localStorage.getItem(this.options.sessionDescription),this.debug('Determine "'+r+'", because of local storage information.')):null!=(n=t.$.global.window.navigator)&&n.language&&(r=t.$.global.window.navigator.language,this.debug('Determine "'+r+'", because of browser settings.'))),r||(r=this.options.default,this.debug('Determine "'+r+'", because of default option.')),r=this._normalizeLanguage(r),this.options.selection.length&&!this.options.selection.includes(r)&&(this.debug('"'+r+'" isn\'t one of the allowed languages. Set language to "'+this.options.selection[0]+'".'),r=this.options.selection[0]),null!=(o=t.$.global.window)&&o.localStorage&&t.$.global.window.localStorage.setItem(this.options.sessionDescription,r),r},i._addTextNodeToFade=function(t){var e=t.parent();this._$domNodeToFade=this._$domNodeToFade?this._$domNodeToFade.add(e):e},i._registerTextNodeToChange=function(t,e,n,o){this._addTextNodeToFade(t),e&&this._replacements.push({$textNodeToTranslate:t,$nodeToReplace:e,textToReplace:n[2],$currentLanguageDomNode:o})},i._ensureLastTextNodeHavingLanguageIndicator=function(e,n,o){if(e&&!n){var r=this.currentLanguage;o&&(r=this.options.default),n=(0,t.$)("\x3c!--"+r+"--\x3e"),e.after(n)}return n},i._switchLanguage=function(e){for(var o,r=this,i=function(){var n=o.value,i=n.$textNodeToTranslate.html();"#text"===n.$textNodeToTranslate.prop("nodeName")&&(i=n.$textNodeToTranslate.prop("textContent"));var a=i.trim();if(!r.options.templateDelimiter||!a.endsWith(r.options.templateDelimiter.post)&&r.options.templateDelimiter.post){var s=n.$currentLanguageDomNode;if(!s){s=(0,t.$)("body");var c=!1;n.$textNodeToTranslate.parent().contents().each((function(){return c?(n.$currentLanguageDomNode=s=(0,t.$)(this),!1):void(this===n.$textNodeToTranslate[0]&&(c=!0))}))}var u=s.prop("textContent");e===u&&r.warn('Text node "'+n.textToReplace+'" is marked as "'+u+'" and has same translation language as it already is.');var l=n.$nodeToReplace.prop("nodeName").toLowerCase();"#comment"===l?n.$textNodeToTranslate.after((0,t.$)("\x3c!--"+u+":"+i+"--\x3e")):n.$textNodeToTranslate.after((0,t.$)("<"+l+">"+u+":"+i+"</"+l+">").hide()),n.$textNodeToTranslate.after((0,t.$)("\x3c!--"+e+"--\x3e")),"#text"===n.$textNodeToTranslate.prop("nodeName")?n.$textNodeToTranslate.prop("textContent",n.textToReplace):n.$textNodeToTranslate.html(n.textToReplace),s.remove(),n.$nodeToReplace.remove()}},a=n(this._replacements);!(o=a()).done;)i();for(var s=0,c=Object.entries(this._textNodesWithKnownTranslation);s<c.length;s++){var u=c[s],l=u[0];u[1].prop("textContent",l)}"localStorage"in t.$.global&&t.$.global.localStorage.setItem(this.options.sessionDescription,e),this.currentLanguage=e},i._switchCurrentLanguageIndicator=function(e){(0,t.$)('a[href="#'+this.options.languageHashPrefix+this.currentLanguage+'"].'+this.options.currentLanguageIndicatorClassName).removeClass(this.options.currentLanguageIndicatorClassName),(0,t.$)('a[href="#'+this.options.languageHashPrefix+e+'"]').addClass(this.options.currentLanguageIndicatorClassName)},r}(t.BoundTools);l._defaultOptions={currentLanguageIndicatorClassName:"current",currentLanguagePattern:"^[a-z]{2}[A-Z]{2}$",default:"enUS",domNodes:{knownTranslation:"div.toc"},fadeEffect:!0,initial:null,languageHashPrefix:"lang-",languageMapping:{deDE:["de","de_de","de-de","german","deutsch"],enUS:["en","en_us","en-us"],enEN:["en_en","en-en","english"],frFR:["fr","fr_fr","fr-fr","french"]},lockDescription:"{1}Switch",name:"Internationalisation",onSwitched:e().noop,onEnsured:e().noop,onSwitch:e().noop,onEnsure:e().noop,preReplacementLanguagePattern:"^\\|({1})$",replaceDomNodeNames:["#text","lang-replace"],replacementDomNodeName:["#comment","lang-replacement"],replacementLanguagePattern:"^([a-z]{2}[A-Z]{2}):((.|\\s)*)$",selection:[],sessionDescription:"{1}",templateDelimiter:{pre:"{{",post:"}}"},textNodeParent:{hideAnimation:[{opacity:0},{duration:"fast"}],showAnimation:[{opacity:1},{duration:"fast"}]}},r.default=l,t.$.fn&&(t.$.fn.Internationalisation=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e().controller(l,n,this)})}(),r}()}));